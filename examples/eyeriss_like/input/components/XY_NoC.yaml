compound_components:
  version: 0.2
  classes:
  - name: XY_NoC
    attributes:
      technology: 40nm
      Y_comparator_width: 4  # compare rowID
      X_comparator_width: 4  # compare colID
      n_PE_rows: 12
      n_PE_cols: 14
      total_PEs: n_PE_cols * n_PE_rows
      datawidth: 64
      Y_X_wire_avg_length: 3mm
    subcomponents:
      - name: Y_memory_controller[0..n_PE_rows-1]
        class: memory_controller
        attributes:
          technology: technology
          datawidth: datawidth
          comparator_width: Y_comparator_width
          n_crossbar_inputs: 1
          n_crossbar_outputs: n_PE_rows
      - name: X_memory_controller[0..total_PEs-1]
        class: memory_controller
        attributes:
          technology: technology
          datawidth: datawidth
          comparator_width: X_comparator_width
          n_crossbar_inputs: 1
          n_crossbar_outputs: n_PE_cols
      - name: Y_X_wire[0..n_PE_rows-1]
        class: wire
        attributes:
          technology: technology
          width: datawidth + X_comparator_width
          length: Y_X_wire_avg_length
    actions:
      - name: transfer_random
        arguments:
          n_rows: 0..n_PE_rows
          n_cols_per_row: 0..n_PE_cols
        subcomponents:
          - name: Y_memory_controller[1..n_rows]
            actions:
              - name: transfer_random
          - name: X_memory_controller[1..n_cols_per_row * n_rows]
            actions:
              - name: transfer_random
          - name: Y_X_wire[0..n_rows-1]
            actions:
            - name: transfer_random

      - name: transfer_repeated
        arguments:
          n_rows: 0..n_PE_rows
          n_cols_per_row: 0..n_PE_cols
        subcomponents:
          - name: Y_memory_controller[1..n_rows]
            actions:
              - name: transfer_repeated
          - name: X_memory_controller[1..n_cols_per_row * n_rows]
            actions:
              - name: transfer_repeated
          - name: Y_X_wire[0..n_rows-1]
            actions:
            - name: transfer_repeated


      - name: idle
        subcomponents:
          - name: Y_memory_controller[0..n_PE_rows-1]
            actions:
              - name: idle
          - name: X_memory_controller[0..total_PEs-1]
            actions:
              - name: idle